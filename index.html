<!DOCTYPE html>
<html lang="kaa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Qaraqalpaq Tili – Test</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">

<style>
body { font-family: 'Nunito', sans-serif; }
</style>
</head>

<body class="bg-sky-50 min-h-screen">

<nav class="bg-sky-600 text-white p-4 flex gap-4">
  <button type="button" onclick="showSection('home')">Bas bet</button>
  <button type="button" onclick="showSection('quiz')">Test</button>
</nav>

<main class="max-w-3xl mx-auto p-6">

<!-- HOME -->
<section id="home-section">
  <h1 class="text-3xl font-extrabold text-sky-700 mb-4">
    Qaraqalpaq tili – Qosımtalar testi
  </h1>
  <button type="button"
    onclick="showSection('quiz')"
    class="bg-sky-600 text-white px-6 py-3 rounded">
    Testti baslaw
  </button>
</section>

<!-- QUIZ -->
<section id="quiz-section" class="hidden">

<!-- PROGRESS -->
<div class="w-full bg-gray-200 rounded h-3 mb-6">
  <div id="progress" class="bg-sky-500 h-3 rounded" style="width:0%"></div>
</div>

<div class="bg-white p-6 rounded shadow">
  <p id="question" class="font-bold text-lg mb-4"></p>

  <div id="answers" class="space-y-2"></div>

  <button type="button"
    id="nextBtn"
    onclick="nextQuestion()"
    disabled
    class="mt-4 bg-green-500 text-white px-4 py-2 rounded opacity-50">
    Keyingi
  </button>
</div>

<div id="result" class="hidden text-center mt-6">
  <h2 class="text-2xl font-bold mb-2">Natıja</h2>
  <p id="scoreText" class="text-lg"></p>
  <button type="button"
    onclick="restartQuiz()"
    class="mt-4 bg-sky-600 text-white px-4 py-2 rounded">
    Qayta baslaw
  </button>
</div>

</section>

</main>

<script>
const sections = ['home','quiz'];
function showSection(name){
  sections.forEach(s=>{
    document.getElementById(s+'-section').classList.add('hidden');
  });
  document.getElementById(name+'-section').classList.remove('hidden');
  if(name === 'quiz') restartQuiz();
}

const quiz = [
 { q:"Balıqshı sózindegi qosımta?", a:["-lar","-shı","-sız"], c:1 },
 { q:"Kitaplar sózindegi qosımta?", a:["-lıq","-lar","-shi"], c:1 },
 { q:"Suwsız sózinde qosımta?", a:["-siz","-lıq","-lar"], c:0 },
 { q:"Doslıq sózinde qosımta?", a:["-shı","-lıq","-lar"], c:1 }
];

let index=0, score=0, selected=null;

function loadQuestion(){
  const q=quiz[index];
  document.getElementById('question').innerText=q.q;
  const box=document.getElementById('answers');
  box.innerHTML="";
  selected=null;
  document.getElementById('nextBtn').disabled=true;
  document.getElementById('nextBtn').classList.add("opacity-50");

  q.a.forEach((text,i)=>{
    const btn=document.createElement("button");
    btn.type="button";
    btn.innerText=text;
    btn.className="w-full border p-2 rounded hover:bg-sky-100";
    btn.onclick=()=>selectAnswer(btn,i);
    box.appendChild(btn);
  });

  document.getElementById('progress').style.width =
    ((index)/quiz.length*100)+"%";
}

function selectAnswer(btn,i){
  document.querySelectorAll("#answers button").forEach(b=>{
    b.classList.remove("bg-sky-200");
  });
  btn.classList.add("bg-sky-200");
  selected=i;
  document.getElementById('nextBtn').disabled=false;
  document.getElementById('nextBtn').classList.remove("opacity-50");
}

function nextQuestion(){
  if(selected===quiz[index].c) score++;
  index++;
  if(index<quiz.length) loadQuestion();
  else showResult();
}

function showResult(){
  document.getElementById('quiz-section').querySelector(".bg-white").classList.add("hidden");
  document.getElementById('result').classList.remove("hidden");
  document.getElementById('progress').style.width="100%";
  document.getElementById('scoreText').innerText =
    `${score}/${quiz.length} durıs juwap (${Math.round(score/quiz.length*100)}%)`;
}

function restartQuiz(){
  index=0; score=0;
  document.getElementById('result').classList.add("hidden");
  document.getElementById('quiz-section').querySelector(".bg-white").classList.remove("hidden");
  loadQuestion();
}

</script>

</body>
</html>
